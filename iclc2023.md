---
# This template is licensed under a Creative Commons 0 1.0 Universal License (CC0 1.0). Public Domain Dedication.

title: 'Ziffers - Numbered Notation for Algorithmic Composition'
author:
  - name: Miika Alonen
    affiliation: Department of Computer Science. Aalto University, Finland
    email: miika.alonen@aalto.fi
  - name: Raphaël Maurice Forment
    affiliation: ECLLA. Université Jean Monnet, France
    email: raphael.forment@gmail.com
abstract: |
    Ziffers is an algorithmic number based musical notation system offering a terse syntax for the improvisation and composition of complex melodies and rhythms. Ziffers gradually evolved from empirical experiments aiming at closing the gap between several number-based notational practices spanning from numerical and staff notation to pitch class set and post-tonal theories. Ziffers places a special emphasis on providing support for live algorithmic and generative composition, embedding a toolset of algorithmic processes directly in its syntax model. The system also tries to accommodate these fixed media types of notation to the liveness experienced when using live coding environments. Ziffers has been influenced by TidalCycles [@mclean2010tidal] and Ixi Lang [@magnusson2011ixi], two popular live coding libraries designed around the use of a custom domain specific language, called mininotation, allowing the live manipulation and transformation of musical patterns.
    In this article, we propose an environment agnostic presentation of the Ziffers musical notation system. As a proof of concept, this article also introduces two implementations running in different environments: Sonic Pi [@aaron2016sonic], a live coding platform designed for education and music performance and Musescore, a general purpose scorewriter and score playback software. In doing so, we are hoping to highlight the versatility of our approach, which seems to allow the use of a unified syntax for different contexts of execution and interpretation.
fontsize: 11pt
geometry: margin=2cm
fontfamily: libertine
fontfamily: inconsolata
mainfont: Linux Libertine O
monofont: Inconsolata
bibliography: references.bib
...
# INTRODUCTION: ZIFFERS, QUICKLY EDITABLE NUMBER BASED NOTATION

**Ziffers** — named and inspired by the older *Ziffersystem* [@warkentin2022story] — proposes a system focused on the conciseness and expressiveness of musical notation. Ziffers is designed to enable generation and transformation of musical patterns [@mccormack1996grammar;@mclean2020algorithmic] in minimal amounts of time and typing. To do so, Ziffers uses a text-based syntax for representing various short-hand symbolic notations used in music theory and concepts in programming languages. The need for concise and succinct notation in the context of live coding performance is a well-known constraint [@roberts2018tensions] that gave rise to many practices and techniques aiming to reduce frictions in the conversational feedback loop between the musician and its programming interface (REFERENCE). Domain specific languages (DSLs) and the use of terse mini notations have become an important design pattern in the conception of live coding interfaces (Hoogland 2019; ADD OTHER), and can also be noted to be a key concept in the larger realm of exploratory or conversational open-ended programming where reactivity and fast decision-making is of prime importance to achieve a creative state of flow [@nash2015cognitive;@kery2017exploring].

Ziffers is designed as a terse and platform independent syntax capable of embedding algorithmic and generative processes at the notational level.  Basic notation tokens denoting pitch, rhythm or expression marks form the base notation, enriched by a set of generative operators and tokens denoting algorithmic transformations of that first layer of notation. Implementation of the Ziffers system is specific to each targeted platform, in conformity with the notation described in this article and the documentation for the prototype implementation. The first prototype of Ziffers has been created in 2018 [@Ziffers_2018] as an inline parser for Sonic Pi. It was thought as an attempt to speed up the process of writing melodic lines on-the-fly, taking advantage of the large number of predefined methods and compositional helpers offered by Sonic Pi's rich internal library. Its design aimed at resolving the dissociation between pitch and rhythm imposed by Sonic Pi data structure and imperative-oriented programming model. After a few years of evolutionary prototyping, Ziffers 2.0 was released in 2022 [@Ziffers_2022], including a new parser aiming at extending Ziffers capabilities with new operators, nested structures and better support for stochastic and aleatoric composition.

# METHOD: DESIGNING BY DRAWING FROM MUSIC NOTATION HISTORY

The Ziffers music notation project initially started as an experiment to confront historical numeric pitch-based music notation practices with the kairotic notations [@cocker2013live] typically found in live coding and algorithmic music performance systems [@blackwell2022live]. Therefore, the system has been designed iteratively in conversation with the diverse and complex historical legacy of said practices. Documents pertaining to the systems of numeric pitch notation in common practice can be traced back as early as the European baroque up to the contemporan era through examples as varied as the American Nashville system, the Chinese Jianpu simplified notation [@kaminski2022jianpu;@MNMA_2022] or the theoretical pitch-class set numbering of musical structures and chords used in post-tonal music theory [@forte1973structure]. 

Numerical systems for score, harmonic or melodic writing – less commonly encountered than their staff-based counterparts – have historically served as compositional tools for polyphonic contrapuntal notation [@davantes1560], early theoretical endeavours in algorithmic composition [@kircher1650] or in pedagogy and teaching [@rousseau1781projet]. Finding a new breath during the late nineteenth-century through the Galin-Paris-Chevré notation [@dauphin2012devenir], the practice spread to Asia where it is widely used, known and practiced, sometimes concurrently with standard staff notation. Some specialized applications of numbered notation can also be found in the toolset of contemporary ethnomusicologists and ethnomathematicians that often take advantage of the versatility of symbolic cipher notation to devise notation systems capable of formalizing musical systems or previously non-written musical practices [@chemillier2002ethnomusicology].

We perceive – as a thought experiment – the use of mininotations [@magnusson2018performing] as modern live coding analogues to previously mentioned numerical music notation systems. In that regard, with their conciseness and economy of expression, we observe that older non-computer based numerical notations systems are adequate fits for the domain but have never been fully transposed and applied to the realm of live coding performance. Strikingly, we see them being used by musicians and music theorists alike as pragmatic and practical tools for draft notation and information sharing. In our opinion, the versatility of pitch-based number notations as well as their adequacy to the traditional way of inputting complex data structures (as lists, arrays or ordered data) in the most music programming languages [@roads1996computer;@dannenberg2018languages] make this type of notation a fruitful exploration domain for live coding and computer-based music notation alike. Generative numeric notation can also mitigate the separation between static and dynamic music notation languages as defined by Dannenberg's typology of the domain. Examples such as Adagio [@dannenberg1986cmu], ABC [@walshaw2011abc],  Guido [@hoos1998guido], MML [@mml2001], MusicXML [@good2001musicxml], Lilypond [@nienhuys2003lilypond] or MusicTXT [@li2021musictxt], as static languages, focus on the encoding of musical information on fixed medium while other dynamic languages such as Nyquist [@dannenberg1997machine], SuperCollider [@mccartney2002rethinking], Sonic Pi [@aaron2016sonic], TidalCycles [@mclean2010tidal], Open Music [@bresson2017next], OpusModus [@opusmodus2022], often extends musical notation by blending it with computational models of control flow, sound processing capabilities or binding different means of sonic writing: "The instrument incorporates notational elements, but conversely the notational is becoming increasingly instrumental and systematic" [@magnusson2019sonic].

# OBJECTIVES: SPECIFICATION OF A CROSS-PLATFORM NOTATION SYSTEM

Objectives of the Ziffers numerical notation adheres to the cognitive dimensions of music notations as defined by @nash2015cognitive and to the criterion defined by the Music Notation Project [@MNMA_2022]. The notation must allow users of different ages and backgrounds to compose music. The Ziffers extension built for Sonic Pi presented in latter sections of this paper builds on the accessibility and pedagogical efforts pursued by @aaron2016sonic. The development of the numerical notation aims to remove the exclusivity that comes with the music theory and provide a beneficial live coding experience for the uninitiated. Use of numeric notation should make it possible to write melodic sequences and interval movements using numbers regardless of the key and scale. The notation should also be minimal enough to be easily manipulated through any writing tool by relying solely on symbols taken from the ASCII table. To easily conceptualize pitches in time, defining a combination of pitch and duration should be as straightforward as possible. The notation should be able to function as an educational tool for teaching music theory and composition. Furthermore, by making the user aware of the relationship between musical and mathematical notation, the system should also support teaching advanced music theory concepts such as musical set theory and the manipulation of pitch-sets or any complex musical objects.

The number of live coding environments have steadily increased in recent years [@awesome2022]. We argue that there is now a need for some amount of notational interoperability between different live coding environments. We interpret the non coordinated emergence of Tidal-like mininotations in tools such as Gibber [@roberts2019bringing], Bacalao [@balacao2020], Petal [@petal_2019] and Hydra [@jackhydra] as an attempt from live-coders to agree on a common rhythmic pattern language despite the use of different and often highly personalized environments. In a similar fashion, the Ziffers project is hoping to bring some cross-environment support for concise and rich melodic notation. Moreover, this project can also be considered as an attempt to bridge the gap between traditional staff-based notation tools such as Avid's Sibelius, Steinberg's Dorico or Musescore and kairotic pattern notations used by live-coders. As demonstrated by the Musescore interpreter (REF TO FIGURE), Ziffers can be used both as a live and fixed-media notation, allowing any musician learning the system to quickly jot down or hear their ideas directly in any Ziffers supported software system capable of audio playback.

The Ziffers system is open for the multiple interpretations of any integer sequence. Depending on context and purpose, numbers can receive multiple interpretations, denoting musical objects such as integer notation (0-9 and T=10 and E=11), scale degrees (1-9, 0=rest), midi notation (1-127), MIDI channels (0-15) or even roman numerals for chord sequence writing (i-vii). The notation also supports commenting and providing supplementary information to clarify the meaning of any number sequence, thus adding support for the definition of custom scales, temperaments and events of any kind. The base syntax has also been designed to support common score-centric notation symbols (codas, bar lines, repetitions) and extended generative symbols (random numbers, mathematical operations) more typically found in a live coding context. In doing so, the Ziffers system allows for some amount of transduction between different notation mediums and contexts, allowing the displacement of live coding ideas into the realm of score-based music composition. From another perspective, Ziffers also opens the field for quickly bringing musical ideas from staff-based musical notation in to the typically improvised and delayed feedback [@rohrhuber2018algorithmic] oriented performing context permitted by live coding environments.

# SONIC-PI BASED PROTOTYPE IMPLEMENTATION

(INSERT PICTURE HERE)

Ziffers has evolved from a simple script embedded in one of many Sonic Pi’s text buffers to a fully fledged Ruby extension and framework for computer aided algorithmic composition based on a PEG parser. The current software architecture for the Sonic Pi's based Ziffers implementation is presented in the figure above. A Musescore 3.0 plugin allowing the transformation of ziffers notation to MIDI files and staff-based score format has also been created and proposed as a proof of concept tool for analyzing musical structures and learning the new numeric notation.

(INSERT MUSESCORE PICTURE HERE)

~~~~ {.ruby}
ziffers " // Aphex Twin - Avril 14th in Ziffers notation with some example transformations
/ synth: piano
| q ^ 2 _ 5 ^ 0 e r s 0  | sq. 5 e 5 ^ 4 3 2 0  | / retrograde: true
| q 2 _ 5 ^ 0 e r s 0 _  | sq. _ 5 e 5 ^ 4 3 2 0  | / octave: -2
| e __ 0 5 ^ 0 2 _ 2 ^ 0 2 4  | e __ 3 ^ 0 3 4 _ 1 ^ 0 3 2  | / inverse: 2"
~~~~

## Main methods

The zplay, zloop (z0…z20) and zparse methods are the main entry points to interact with Ziffers. The multiline methods, ziff and ziffers, allow vertical writing and looping of polyphonic patterns written multiple lines. A slightly different version, ztracker, emulates the behavior of classic music tracker softwares (e.g. Pro Tracker, Renoise) for multiline horizontal writing. Multiple modes of interaction with the patterning system are detailed in the repository hosting the Sonic Pi implementation. Each method has its own specificities, and might be better used to adapt to a particular context of execution. For instance, composing will preferably be supported by the non-looping zplay method while improvisation is preferably handled through the looping and automatically synchronized zloop methods (each loop synchronizing on z0). Being non intrusive, Ziffers can also adapt to the live_loop mechanism defined by Sonic Pi to further enhance musical expressivity. The combined usage of live_loop and zplay methods is supported for musicians willing to use both patterning paradigms.

## Inputs and parameters

All inputs are normalized to a string, type conversion being applied when necessary. The integer '2468' can be parsed to a sequence of notes or a chord, etc... Adjusting the base behavior of the parser can be done by providing additional keyword arguments defining a context. In a similar fashion, user input can also be specified as a lambda function or as enumerable defined by the Ruby language. This is allowing for the definition of infinite note sequences such as the Morse-Thue sequence demonstrated above, one that is commonly used to compose fractal music [@kindermann2001musinum;@gomez2021symbolic].


# Conclusion

# Acknowledgment

Authors would like to thank Sam Aaron and the whole Sonic Pi community for the important work on improving the accessibility on programming and for the inspiration to pursue research in the field of live coding. Raphaël would like to thank Laurent Pottier and Alain Bonardi for their support, as well as the doctoral school *3LA* from the University of Lyon for the funding it provided to this research.

# References
